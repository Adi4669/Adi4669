<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="signed_in.css" />
  </head>
  <body>
    <header class="header">
      <nav class="container navbar">
        <button
          id="menuToggle"
          class="hmbrg-menu"
          aria-label="Open menu"
          aria-controls="sidebar"
          aria-expanded="false">
          <img class="ham-menu" src="images/hamburger-menu.svg" />
          <div class="tooltip">Menu</div>
        </button>

        <div class="desktop-nav">
          <a
            href="#overview"
            class="nav-link"
            onclick="location.href='#overview'"
            >Overview</a
          >
          <a
            href="#features"
            class="nav-link"
            onclick="location.href='#features'"
            >Features</a
          >
          <a href="login.html" onclick="pageTransition(event)" class="want"
            >Want Blood</a
          >
          <a href="login.html" onclick="pageTransition(event)" class="donate"
            >Donate Blood</a
          >
          <a href="login.html" onclick="pageTransition(event)" class="login"
            >Log-in</a
          >
          <!-- <a href="#tech-stack" class="nav-link">Tech Stack</a>
          <a href="#roadmap" class="nav-link">Roadmap</a> -->
        </div>
      </nav>
    </header>

    <section
      id="overview"
      class="main"
      style="
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 360px;
        padding: 80px 60px;
        flex-wrap: wrap;
        border-radius: 40px;
        background-color: rgba(255, 226, 226, 0.5);
        /* backdrop-filter: blur(12px); */
      ">
      <div style="flex: 1; min-width: 300px; text-align: left">
        <h1
          style="
            font-size: 80px;
            font-family: Impact, Haettenschweiler, 'Arial Narrow Bold',
              sans-serif;
            margin: 0;
            color: #d42020;
            line-height: 1;
          ">
          THE RED THREAD
        </h1>
        <p style="font-size: 22px; color: #666; margin-top: 15px">
          - Weaving a Digital Lifeline
        </p>

        <div style="margin-top: 40px">
          <h2 style="font-size: 32px; color: #222; margin-bottom: 12px">
            A Lifesaving Connection
          </h2>
          <p
            style="
              font-size: 18px;
              color: #555;
              line-height: 1.6;
              max-width: 550px;
            ">
            This interactive roadmap outlines the plan for the Blood Donation &
            Emergency Connect platform â€” an application designed to bridge the
            gap between donors and those in urgent need. Explore the features,
            technology, and development plan below.
          </p>
        </div>
      </div>

      <div style="flex: 1; min-width: 320px; text-align: center">
        <img
          src="images/istockphoto-1415405974-612x612.jpg"
          alt="Blood donation process"
          style="
            width: 100%;
            max-width: 480px;
            border: 4px solid red;
            border-radius: 10px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
          " />
      </div>
    </section>

    <section id="features">
      <div class="features">
        <h2>Platform Features</h2>
        <h3 style="font-weight: 400">
          Core functionalities separated by development focus.
        </h3>
      </div>

      <div tabs-nav>
        <nav class="tabs-container" aria-label="Tabs">
          <button class="tab nav-btn" data-tab="mvp">
            Minimum Viable Product (MVP)
          </button>
          <button class="tab nav-btn" data-tab="future">
            Future Enhancements
          </button>
        </nav>
      </div>

      <div id="mvp" class="tab-content feature-grid active">
        <div class="feature-card">
          <h3>User Authentication</h3>
          <p>
            Secure sign-up and login for donors and recipients, including
            profile creation with essential details like blood type, location,
            and contact info.
          </p>
        </div>
        <div class="feature-card">
          <h3>Blood Request System</h3>
          <p>
            Recipients can post urgent blood requests. Donors receive real-time
            notifications for matching blood types in their vicinity.
          </p>
        </div>
        <div class="feature-card">
          <h3>Donor Search & Filtering</h3>
          <p>
            A searchable database of registered donors, filterable by blood type
            and geographic location to find matches quickly.
          </p>
        </div>
        <div class="feature-card">
          <h3>Basic Geolocation</h3>
          <p>
            Display donor locations on a simple map to help recipients visualize
            nearby potential donors and blood banks.
          </p>
        </div>
        <div class="feature-card">
          <h3>In-App Messaging</h3>
          <p>
            A secure and private communication channel for recipients and
            potential donors to coordinate donation logistics.
          </p>
        </div>
        <div class="feature-card">
          <h3>Admin Dashboard</h3>
          <p>
            A simple backend interface for admins to manage users, verify donor
            information, and oversee platform activity.
          </p>
        </div>
      </div>
    </section>
    <div class="app" id="appRoot">
      <aside id="sidebar" class="sidebar">
        <div class="brand" role="banner">
          <div class="logo" aria-hidden="true">BD</div>
          <div style="display: flex; flex-direction: column; min-width: 0">
            <div class="title">Blood Donation</div>
            <div class="muted desc" style="font-size: 12px">
              Save lives â€” one drop at a time
            </div>
          </div>

          <button
            class="toggle-btn"
            id="collapseBtn"
            aria-expanded="true"
            aria-controls="sidebar"
            title="Collapse menu">
            <!-- simple hamburger / chevron icon -->
            <svg
              id="collapseIcon"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2">
              <path d="M3 12h18M3 6h18M3 18h18"></path>
            </svg>
          </button>
        </div>

        <nav>
          <ul class="nav-list" role="menu" aria-label="Main">
            <li
              class="nav-item"
              role="menuitem"
              tabindex="0"
              data-key="dashboard"
              aria-current="page">
              <span class="icon" aria-hidden="true">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2">
                  <rect x="3" y="3" width="7" height="9" rx="1" />
                  <rect x="14" y="3" width="7" height="5" rx="1" />
                  <rect x="14" y="14" width="7" height="7" rx="1" />
                  <rect x="3" y="16" width="7" height="5" rx="1" />
                </svg>
              </span>
              <span class="nav-label">Dashboard</span>
            </li>

            <li
              class="nav-item"
              role="menuitem"
              tabindex="0"
              data-key="find-donor">
              <span class="icon" aria-hidden="true">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2">
                  <circle cx="11" cy="11" r="7" />
                  <path d="M21 21l-4.35-4.35" />
                </svg>
              </span>
              <span class="nav-label">Find a Donor</span>
            </li>

            <li
              class="nav-item"
              role="menuitem"
              tabindex="0"
              data-key="donor-list"
              aria-haspopup="true"
              aria-expanded="false">
              <span class="icon" aria-hidden="true">
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-3-3.87" />
                  <path d="M4 21v-2a4 4 0 0 1 3-3.87" />
                  <circle cx="12" cy="7" r="3" />
                </svg>
              </span>
              <span class="nav-label">Donors</span>
              <button
                class="submenu-toggle"
                aria-label="Toggle Donors submenu"
                title="Toggle">
                â–¾
              </button>

              <div class="submenu" data-submenu>
                <div
                  class="nav-item"
                  role="menuitem"
                  tabindex="0"
                  data-key="all-donors"
                  style="padding-left: 0">
                  <span class="icon" aria-hidden="true">ðŸ‘¥</span>
                  <span class="nav-label">All Donors</span>
                </div>
                <div
                  class="nav-item"
                  role="menuitem"
                  tabindex="0"
                  data-key="become-donor"
                  style="padding-left: 0">
                  <span class="icon" aria-hidden="true">âž•</span>
                  <span class="nav-label">Become a Donor</span>
                </div>
              </div>
            </li>

            <li class="nav-item" role="menuitem" tabindex="0" data-key="camps">
              <span class="icon" aria-hidden="true">ðŸ“…</span>
              <span class="nav-label">Camps</span>
            </li>

            <li
              class="nav-item"
              role="menuitem"
              tabindex="0"
              data-key="requests">
              <span class="icon" aria-hidden="true">ðŸ“¨</span>
              <span class="nav-label">Requests</span>
            </li>
          </ul>
        </nav>

        <div class="sidebar-footer">
          <button
            class="nav-item"
            role="button"
            tabindex="0"
            id="profileBtn"
            style="width: 100%; color: black">
            <span class="icon">ðŸ‘¤</span>
            <span class="nav-label">Profile</span>
          </button>
          <button
            class="nav-item"
            role="button"
            tabindex="0"
            id="logoutBtn"
            title="Logout"
            style="width: 48px; justify-content: center">
            <span class="icon">Logout</span>
          </button>
        </div>
      </aside>
    </div>

    <footer class="site-footer">
      <div class="footer-container">
        <div class="footer-column about">
          <h3>The Red Thread</h3>
          <p>
            We connect donors and recipients quickly and safely. Join our
            community to help save lives â€” one donation at a time.
          </p>
        </div>

        <div class="footer-column links">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="signup.html">Sign Up</a></li>
            <li><a href="login.html">Log In</a></li>
          </ul>
        </div>

        <div class="footer-column contact">
          <h4>Contact</h4>
          <p>
            Email:
            <a href="mailto:help@theredthread.org">help@theredthread.org</a>
          </p>
          <p>Phone: <a href="tel:+1234567890">+91 23456 78901</a></p>
          <p>Address: BMSCE, Bengaluru</p>
        </div>

        <!-- <div class="footer-column socials">
          <h4>Follow Us</h4>
          <p class="social-links">
            <a href="#" aria-label="Twitter">Twitter</a> â€¢
            <a href="#" aria-label="Facebook">Facebook</a> â€¢
            <a href="#" aria-label="Instagram">Instagram</a>
          </p>
        </div> -->
      </div>

      <div class="footer-bottom">
        <p>Â© <span id="year"></span> The Red Thread â€” All rights reserved.</p>
      </div>
    </footer>

    <script>
      // --- 1. Page Transitions ---
      function pageTransition(e) {
        e.preventDefault();
        document.body.classList.add("fade-out");
        setTimeout(() => {
          window.location = e.target.href;
        }, 500);
      }

      // --- 2. Navigation Button Highlighting ---
      const buttons = document.querySelectorAll(".nav-btn");
      buttons.forEach((btn) => {
        btn.addEventListener("click", function () {
          // remove red from all buttons
          buttons.forEach((b) => b.classList.remove("red"));
          // add red only to clicked button
          btn.classList.add("red");
        });
      });

      // --- 3. Feature Tabs Functionality ---
      document.addEventListener("DOMContentLoaded", () => {
        const tabs = document.querySelectorAll(".tab");
        const tabContents = document.querySelectorAll(".tab-content");

        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            tabs.forEach((item) => item.classList.remove("tab-active"));
            tab.classList.add("tab-active");
            const targetId = tab.getAttribute("data-tab");
            tabContents.forEach((content) => {
              content.classList.remove("active");
              if (content.id === targetId) {
                content.classList.add("active");
              }
            });
          });
        });

        // --- 4. NEW Sidebar Logic (Slide-in Drawer) ---
        const sidebar = document.getElementById("sidebar");
        const openBtn = document.getElementById("menuToggle"); // The Hamburger in the header
        const closeBtn = document.getElementById("collapseBtn"); // The toggle button inside sidebar

        // Create the overlay dynamically
        const overlay = document.createElement("div");
        overlay.className = "overlay";
        document.body.appendChild(overlay);

        // Accessibility helpers and focus trapping
        let previousActiveEl = null;
        let _trapListener = null;
        const focusableSelector =
          'a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])';

        function openSidebar() {
          if (!sidebar) return;
          previousActiveEl = document.activeElement;
          sidebar.classList.add("active");
          overlay.classList.add("active");
          document.body.style.overflow = "hidden";
          // ARIA updates
          sidebar.setAttribute("aria-hidden", "false");
          overlay.setAttribute("aria-hidden", "false");
          overlay.setAttribute("role", "presentation");
          overlay.setAttribute("tabindex", "-1");
          openBtn && openBtn.setAttribute("aria-expanded", "true");

          // Focus first focusable element
          const focusable = sidebar.querySelectorAll(focusableSelector);
          if (focusable.length) focusable[0].focus();

          // Trap focus inside sidebar
          _trapListener = function (e) {
            if (e.key !== "Tab") return;
            const nodes = Array.from(
              sidebar.querySelectorAll(focusableSelector)
            ).filter((n) => !n.hasAttribute("disabled"));
            if (!nodes.length) return;
            const first = nodes[0];
            const last = nodes[nodes.length - 1];
            if (e.shiftKey) {
              if (document.activeElement === first) {
                e.preventDefault();
                last.focus();
              }
            } else {
              if (document.activeElement === last) {
                e.preventDefault();
                first.focus();
              }
            }
          };
          document.addEventListener("keydown", _trapListener, true);
        }

        function closeSidebar() {
          if (!sidebar) return;
          sidebar.classList.remove("active");
          overlay.classList.remove("active");
          document.body.style.overflow = "";
          // ARIA updates
          sidebar.setAttribute("aria-hidden", "true");
          overlay.setAttribute("aria-hidden", "true");
          openBtn && openBtn.setAttribute("aria-expanded", "false");

          // remove focus trap
          if (_trapListener) {
            document.removeEventListener("keydown", _trapListener, true);
            _trapListener = null;
          }
          // restore focus
          try {
            previousActiveEl && previousActiveEl.focus();
          } catch (err) {}
        }

        // Event Listener: Open (Hamburger) â€” open the overlay drawer and show sidebar
        if (openBtn) {
          openBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            openSidebar();
          });
        }

        // Event Listener: Close (Button inside sidebar) â€” always close the drawer
        if (closeBtn) {
          closeBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            closeSidebar();
            openBtn && openBtn.focus();
          });
        }

        // Event Listener: Close (Clicking outside/Overlay)
        overlay.addEventListener("click", closeSidebar);

        // Event Listener: Close (Pressing Escape key)
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && sidebar.classList.contains("active")) {
            closeSidebar();
          }
        });

        // --- 5. Submenu Logic (Donors Dropdown) ---
        document
          .querySelectorAll('.nav-item[aria-haspopup="true"]')
          .forEach((item) => {
            const toggleBtn = item.querySelector(".submenu-toggle");
            const submenu = item.querySelector("[data-submenu]");
            if (!toggleBtn || !submenu) return;

            toggleBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              const isOpen = submenu.classList.toggle("open");
              item.setAttribute("aria-expanded", String(isOpen));

              // Rotate arrow icon if exists
              toggleBtn.style.transform = isOpen
                ? "rotate(180deg)"
                : "rotate(0deg)";
            });
          });

        // --- 6. Active State for Menu Items ---
        document.querySelectorAll(".nav-item[data-key]").forEach((it) => {
          it.addEventListener("click", () => {
            document
              .querySelectorAll(".nav-item[data-key]")
              .forEach((x) => x.removeAttribute("aria-current"));
            it.setAttribute("aria-current", "page");
          });
        });
      });
    </script>
  </body>
</html>
